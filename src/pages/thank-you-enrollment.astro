---
import ThankYouLayout from '../layouts/ThankYouLayout.astro';

const customSignHeading = {
  title: 'Thank you for joining',
  subtitle:
    'A payment to STRAIGHTFORWARD GROWTH will appear on your statement.',
};
---

<ThankYouLayout
  meta={{
    title: 'Straighforward Growth | Consulting expertise with a twist',
    description:
      'With a combined 30 years of experience in the tech industry, we help you grow your business with a twist.',
  }}
  header={customSignHeading}
>
  <section class="region wrapper">
    <div class="content flow prose">
      <h2>What's next?</h2>
      <p>
        Within the next 24 hours you'll get an email from Notion saying that
        you've been added as a guest to your own unique page. This page will
        have your first 3 long form content suggestions, and so much more!
      </p>
      <p>
        Typically we use the same email address associated with your Stripe
        account to share the Notion page. If you would like to use another email
        address, feel free to add that here.
      </p>
      <p>
        <pre id="searchParams"></pre>
      </p>
      <form
        name="notion-share-email"
        class="flow"
        netlify-honeypot="bot-field"
        method="POST"
        data-netlify="true"
        action="/"
      >
        <input
          type="hidden"
          name="subject"
          value="Form: straightfowardgrowth.com // Notion share email"
        />
        <p class="hidden">
          <label for="bot-field">Do you like delicious treats?</label>
          <input name="bot-field" id="bot-field" />
        </p>
        <span class="stack">
          <label for="email">Preferred email for Notion</label>
          <input id="email" name="email" type="email" required />
        </span>
        <button type="submit" class="button">Submit</button>
      </form>
    </div>
  </section>
</ThankYouLayout>

<script type="module">
  const searchParams = new URLSearchParams(window.location.search);
  console.log(searchParams);
  const session_id = searchParams.get('session_id');
  console.log(session_id);
  console.log(typeof session_id);

  const searchParamsOutput = document.getElementById('searchParams');
  console.log(searchParamsOutput);
  if (searchParamsOutput) {
    if (searchParamsOutput instanceof HTMLElement) {
      if (searchParamsOutput) {
        searchParamsOutput.innerHTML = session_id?.toString() ?? '';
      }
    }
  }
</script>
